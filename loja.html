<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Loja</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

<h2 id="titulo"></h2>
<div id="produtos"></div>

<script>
const supabase = window.supabase.createClient(
  "https://bzgvbghxmebdjqnlakbj.supabase.co",
  "sb_publishable_IyvZNwtgkvECR0QVlYbhzw_zPL1TMJv"
);

const params = new URLSearchParams(window.location.search);
const slug = params.get("slug");

async function carregar(){

  const { data: loja } = await supabase
    .from("lojas")
    .select("*")
    .eq("slug", slug)
    .single();

  titulo.innerText = loja.nome;

  const { data: produtos } = await supabase
    .from("produtos")
    .select("*")
    .eq("loja_id", loja.id);

  produtos.forEach(p=>{
    produtosDiv.innerHTML+=`
      <p>${p.nome} - R$ ${p.preco}</p>
    `;
  });
}

carregar();
</script>

</body>
</html>
